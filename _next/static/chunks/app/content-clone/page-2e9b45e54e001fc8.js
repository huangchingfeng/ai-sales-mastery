(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{63:(e,t,s)=>{"use strict";var n=s(7260);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})},1318:(e,t,s)=>{Promise.resolve().then(s.bind(s,1785))},1785:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var n=s(5155),l=s(2115),a=s(63),r=s(8337),c=s(8826),o=s(6908),i=s(5102);function d(){let[e,t]=(0,l.useState)(1),[s,d]=(0,l.useState)(o.ji),[m,p]=(0,l.useState)(!0),x=(0,a.useRouter)(),{t:h,language:u}=(0,r.o)(),{user:j,loading:g}=(0,c.A)();(0,l.useEffect)(()=>{(async()=>{if(g)return;if(!j)return x.push("/");let e=null;(e=j?await (0,o.rG)(j.uid):(0,o.iH)())&&d(e),p(!1)})()},[x,j,g]);let v=(e,t)=>{d(s=>({...s,[e]:t}))},b=async()=>{if(e<5)t(e=>e+1);else{let e={...s,language:u};j?await (0,o.H9)(j.uid,e):(0,o.Lt)(e),x.push("/content-clone/result")}},N=(e,t)=>{let n=s[e];n.includes(t)?v(e,n.filter(e=>e!==t)):v(e,[...n,t])},f=[{id:1,name:h.contentClone.steps.basics,letter:"C"},{id:2,name:h.contentClone.steps.product,letter:"L"},{id:3,name:h.contentClone.steps.target,letter:"O"},{id:4,name:h.contentClone.steps.style,letter:"S"},{id:5,name:h.contentClone.steps.preference,letter:"E"}];return m?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-gray-500",children:h.common.loading})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,n.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:h.contentClone.title}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:h.contentClone.subtitle})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(i.A,{}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:[h.common.step," ",e," / 5"]})]})]})})}),(0,n.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,n.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-4",children:(0,n.jsx)("div",{className:"flex justify-between",children:f.map(t=>(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"step-indicator ".concat(e===t.id?"step-active":e>t.id?"step-completed":"step-pending"),children:e>t.id?"✓":t.letter}),(0,n.jsx)("span",{className:"text-xs mt-1 ".concat(e>=t.id?"text-gray-900":"text-gray-400"),children:t.name})]},t.id))})})}),(0,n.jsx)("main",{className:"max-w-3xl mx-auto px-4 py-8",children:(0,n.jsxs)("div",{className:"card",children:[1===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:h.contentClone.step1.title}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:h.contentClone.step1.description})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step1.name}),(0,n.jsx)("input",{type:"text",value:s.name,onChange:e=>v("name",e.target.value),className:"form-input",placeholder:h.contentClone.step1.namePlaceholder})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step1.industry}),(0,n.jsxs)("select",{value:s.industry,onChange:e=>v("industry",e.target.value),className:"form-input",children:[(0,n.jsx)("option",{value:"",children:h.contentClone.step1.industryPlaceholder}),h.industries.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step1.jobTitle}),(0,n.jsx)("input",{type:"text",value:s.jobTitle,onChange:e=>v("jobTitle",e.target.value),className:"form-input",placeholder:h.contentClone.step1.jobTitlePlaceholder})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step1.experience}),(0,n.jsxs)("select",{value:s.yearsExperience,onChange:e=>v("yearsExperience",e.target.value),className:"form-input",children:[(0,n.jsx)("option",{value:"",children:h.contentClone.step1.experiencePlaceholder}),h.experienceOptions.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})]}),2===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:h.contentClone.step2.title}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:h.contentClone.step2.description})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step2.product}),(0,n.jsx)("textarea",{value:s.productService,onChange:e=>v("productService",e.target.value),className:"form-textarea",rows:4,placeholder:h.contentClone.step2.productPlaceholder})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step2.advantage}),(0,n.jsx)("textarea",{value:s.productAdvantage,onChange:e=>v("productAdvantage",e.target.value),className:"form-textarea",rows:3,placeholder:h.contentClone.step2.advantagePlaceholder})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step2.price}),(0,n.jsxs)("select",{value:s.priceRange,onChange:e=>v("priceRange",e.target.value),className:"form-input",children:[(0,n.jsx)("option",{value:"",children:h.contentClone.step2.pricePlaceholder}),h.priceOptions.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})]}),3===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:h.contentClone.step3.title}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:h.contentClone.step3.description})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step3.idealCustomer}),(0,n.jsx)("textarea",{value:s.idealCustomer,onChange:e=>v("idealCustomer",e.target.value),className:"form-textarea",rows:3,placeholder:h.contentClone.step3.idealCustomerPlaceholder})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step3.painPoints}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:h.painPointOptions.map(e=>(0,n.jsxs)("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,n.jsx)("input",{type:"checkbox",checked:s.painPoints.includes(e),onChange:()=>N("painPoints",e),className:"w-4 h-4 text-blue-600"}),(0,n.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step3.commonQuestions}),(0,n.jsx)("div",{className:"space-y-3 mt-2",children:[0,1,2].map(e=>(0,n.jsx)("input",{type:"text",value:s.commonQuestions[e]||"",onChange:t=>((e,t)=>{let n=[...s.commonQuestions];n[e]=t,v("commonQuestions",n)})(e,t.target.value),className:"form-input",placeholder:"".concat(h.contentClone.step3.questionPlaceholder," ").concat(e+1)},e))})]})]}),4===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:h.contentClone.step4.title}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:h.contentClone.step4.description})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step4.tone}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-3 mt-2",children:h.toneOptions.map(e=>(0,n.jsxs)("label",{className:"p-4 border rounded-lg cursor-pointer ".concat(s.toneStyle===e?"border-blue-500 bg-blue-50":"hover:bg-gray-50"),children:[(0,n.jsx)("input",{type:"radio",name:"toneStyle",value:e,checked:s.toneStyle===e,onChange:e=>v("toneStyle",e.target.value),className:"sr-only"}),(0,n.jsx)("div",{className:"font-medium",children:e})]},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step4.catchphrases}),(0,n.jsx)("textarea",{value:s.catchphrases,onChange:e=>v("catchphrases",e.target.value),className:"form-textarea",rows:2,placeholder:h.contentClone.step4.catchphrasesPlaceholder})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step4.avoidWords}),(0,n.jsx)("input",{type:"text",value:s.avoidWords,onChange:e=>v("avoidWords",e.target.value),className:"form-input",placeholder:h.contentClone.step4.avoidWordsPlaceholder})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step4.sampleWriting}),(0,n.jsx)("textarea",{value:s.sampleWriting,onChange:e=>v("sampleWriting",e.target.value),className:"form-textarea",rows:4,placeholder:h.contentClone.step4.sampleWritingPlaceholder})]})]}),5===e&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:h.contentClone.step5.title}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:h.contentClone.step5.description})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step5.platforms}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-2",children:h.platformOptions.map(e=>(0,n.jsxs)("label",{className:"p-3 border rounded-lg cursor-pointer text-center ".concat(s.platforms.includes(e)?"border-blue-500 bg-blue-50":"hover:bg-gray-50"),children:[(0,n.jsx)("input",{type:"checkbox",checked:s.platforms.includes(e),onChange:()=>N("platforms",e),className:"sr-only"}),(0,n.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step5.contentLength}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-3 mt-2",children:h.lengthOptions.map(e=>(0,n.jsxs)("label",{className:"p-4 border rounded-lg cursor-pointer text-center ".concat(s.contentLength===e?"border-blue-500 bg-blue-50":"hover:bg-gray-50"),children:[(0,n.jsx)("input",{type:"radio",name:"contentLength",value:e,checked:s.contentLength===e,onChange:e=>v("contentLength",e.target.value),className:"sr-only"}),(0,n.jsx)("div",{className:"text-sm font-medium",children:e})]},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:h.contentClone.step5.cta}),(0,n.jsx)("input",{type:"text",value:s.cta,onChange:e=>v("cta",e.target.value),className:"form-input",placeholder:h.contentClone.step5.ctaPlaceholder})]})]}),(0,n.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-100",children:[(0,n.jsx)("button",{type:"button",onClick:()=>{e>1&&t(e=>e-1)},className:"btn-secondary ".concat(1===e?"invisible":""),children:h.common.previous}),(0,n.jsx)("button",{type:"button",onClick:b,className:"btn-primary",children:5===e?h.common.submit:h.common.next})]})]})})]})}},5102:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(5155),l=s(8337);function a(){let{language:e,setLanguage:t,languageNames:s}=(0,l.o)();return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"appearance-none bg-white border border-gray-200 rounded-lg px-3 py-1.5 pr-8 text-sm text-gray-700 cursor-pointer hover:border-blue-500 focus:outline-none focus:border-blue-500 transition-colors",children:["zh-TW","zh-CN","en","ms","ja","ko"].map(e=>(0,n.jsx)("option",{value:e,children:s[e]},e))}),(0,n.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}},6908:(e,t,s)=>{"use strict";s.d(t,{ji:()=>p,ML:()=>u,iH:()=>h,rG:()=>g,Lt:()=>x,H9:()=>j});var n=s(9390),l=s(8516);let a="users",r="profiles",c="main";function o(){if(!l.db)throw Error("Firestore 未初始化。請確認環境變數已正確設定。");return l.db}async function i(e,t){let s=o();try{let l=(0,n.H9)(s,a,e,r,c);(await (0,n.x7)(l)).exists()?await (0,n.mZ)(l,{...t,updatedAt:(0,n.O5)()}):await (0,n.BN)(l,{...t,createdAt:(0,n.O5)(),updatedAt:(0,n.O5)()})}catch(e){throw console.error("儲存 Profile 失敗:",e),Error("無法儲存用戶資料，請稍後再試")}}async function d(e){let t=o();try{let s=(0,n.H9)(t,a,e,r,c),l=await (0,n.x7)(s);if(l.exists())return l.data();return null}catch(e){throw console.error("讀取 Profile 失敗:",e),Error("無法讀取用戶資料，請稍後再試")}}let m="closer_user_profile",p={name:"",industry:"",jobTitle:"",yearsExperience:"",productService:"",productAdvantage:"",priceRange:"",idealCustomer:"",painPoints:[],commonQuestions:["","",""],toneStyle:"",catchphrases:"",avoidWords:"",sampleWriting:"",platforms:[],contentLength:"",cta:"",language:"zh-TW"};function x(e){localStorage.setItem(m,JSON.stringify(e))}function h(){let e=localStorage.getItem(m);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}function u(){let e=h();return!!e&&!!(e.name&&e.industry)}async function j(e,t){x(t),await i(e,t)}async function g(e){try{let t=await d(e);if(t)return x(t),t;return h()}catch(e){return console.error("載入雲端 Profile 失敗，使用本地資料:",e),h()}}}},e=>{e.O(0,[153,563,320,168,441,493,358],()=>e(e.s=1318)),_N_E=e.O()}]);